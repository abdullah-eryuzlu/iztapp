{% extends "panel/templates/global.njk" %}

{% block wrapper %}
<h1>Weekly Schedule</h1>

<form action="/api/update/weeklySchedule/{{ weeklySchedule._id }}" method="POST">
	<label for="semester">Semester</label>
	<input type="number" name="semester" id="semester" value="{{ weeklySchedule.semester }}" required>
	<label for="type">Type</label>
	<select name="type" id="type" required>
		{% for type in types %}
		{% if weeklySchedule.type == type %}
		<option value="{{ type }}" selected>{{ typeStrings[type] }}</option>
		{% else %}
		<option value="{{ type }}">{{ typeStrings[type] }}</option>
		{% endif %}
		{% endfor %}
	</select>
	<button type="submit">Update</button>
</form>

<div class="days">
	{% set dayCounter = 0 %}
	{% for day in weeklySchedule.days %}
	{% if day == null %}
	<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#day-modal-{{ dayCounter }}">
		Launch demo modal
	</button>
	<div class="modal fade" id="day-modal-{{ dayCounter }}" tabindex="-1" role="dialog"
		aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<form action="">
						<input type="number" name="type" value="{{ weeklySchedule.type }}" hidden>
						<input type="number" name="day" value="{{ dayCounter }}" hidden>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					<button type="button" class="btn btn-primary">Save changes</button>
				</div>
			</div>
		</div>
	</div>
	{% set dayCounter = dayCounter + 1 %}
	{% endif %}
	{% endfor %}
</div>
{% endblock %}
